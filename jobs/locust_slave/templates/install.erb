#!/bin/bash

set -e -x

echo "Installing Locust"

apt-get update
apt-get --assume-yes install python-dev python-pip

pip install locustio

cat << EOF > /opt/locustfile.py
#!/usr/bin/env python
from locust import HttpLocust, TaskSet, task

class UserBehavior(TaskSet):
        @task
        def getfile(l):
           l.client.get("/")

class WebsiteUser(HttpLocust):
   task_set = UserBehavior
   min_wait=500
   max_wait=500
EOF


exit 0
